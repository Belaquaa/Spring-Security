# User Management System

Это приложение для управления пользователями с использованием Spring Boot и Thymeleaf.  Интеграция с VK для получения аватаров пользователя. Оно позволяет добавлять, редактировать и удалять пользователей, а также управлять их ролями и профилями.

## Основные компоненты

### Конфигурация

- **`AppConfig.java`**: Настраивает бин для `RestTemplate`, используемого для выполнения HTTP-запросов.

- **`SecurityConfig.java`**: Конфигурирует безопасность приложения, включая настройки для аутентификации пользователей и управления доступом. Использует `BCryptPasswordEncoder` для хэширования паролей и настраивает `SecurityFilterChain` для управления доступом к различным эндпоинтам.

- **`WebConfig.java`**: Настраивает бин для `WebClient` и `HiddenHttpMethodFilter`. `WebClient` используется для выполнения асинхронных HTTP-запросов, а `HiddenHttpMethodFilter` позволяет обрабатывать HTTP-методы, отличные от GET и POST.

### Контроллеры

- **`AuthController.java`**: Обрабатывает запросы, связанные с регистрацией и аутентификацией пользователей. Включает методы для отображения страниц входа и регистрации, а также для обработки формы регистрации.

- **`GlobalExceptionHandler.java`**: Обрабатывает исключения, возникающие в приложении, такие как `UserNotFoundException`, `RoleNotFoundException`, и ошибки целостности данных. Возвращает страницы с ошибками для пользователя.

- **`ViewController.java`**: Управляет отображением списка пользователей и обработкой запросов на редактирование, добавление и удаление пользователей. Обеспечивает доступ к профилю пользователя и редактирование информации.

### Сервисы

- **`UserService.java`**: Содержит бизнес-логику для управления пользователями и их ролями. Включает методы для добавления, обновления, удаления пользователей, а также для управления ролями и профилями. Использует `VkApiService` для получения аватарок пользователей из ВКонтакте.

### Репозитории

- **`RoleRepository.java`**: Репозиторий для работы с сущностями роли пользователей. Предоставляет методы для поиска ролей по имени.

- **`UserRepository.java`**: Репозиторий для работы с сущностями пользователей. Включает методы для поиска пользователей по электронной почте, а также для удаления ролей и пользователей.

### Инициализация данных

- **`UserDataInitializer.java`**: Инициализирует данные при старте приложения. Создает роли и несколько пользователей с разными ролями, чтобы начать работу с предустановленными данными.

### API ВКонтакте

- **`VkApiProperties.java`**: Конфигурация для API ВКонтакте, включая версию API и токен доступа.

- **`VkApiResponse.java`**: Модели для обработки ответов от API ВКонтакте, включая информацию о фотографиях пользователей.

- **`VkApiService.java`**: Сервис для получения информации о пользователях ВКонтакте, включая их аватарки. Использует `WebClient` для выполнения HTTP-запросов к API ВКонтакте.

## HTML Шаблоны

- **`users.html`**: Шаблон для отображения списка пользователей с возможностью добавления нового пользователя, редактирования существующих пользователей и удаления. Включает кнопки для выполнения этих действий, если у пользователя есть роль `ADMIN`.

- **`add-user.html`**: Шаблон для страницы добавления нового пользователя. Содержит форму для ввода данных пользователя.

- **`edit-user.html`**: Шаблон для страницы редактирования информации о пользователе. Содержит форму для изменения данных существующего пользователя.

- **`error.html`**: Шаблон для отображения сообщений об ошибках. Используется для отображения различных типов ошибок, таких как ошибки валидации или ошибки сервера.

- **`login.html`**: Шаблон для страницы входа в приложение. Содержит форму для ввода электронной почты и пароля.

- **`register.html`**: Шаблон для страницы регистрации нового пользователя. Содержит форму для ввода данных нового пользователя.

- **`user-profile.html`**: Шаблон для отображения профиля текущего пользователя. Показывает информацию о пользователе и его ролях.

## Используемые технологии

- **Spring Boot**: Основной фреймворк для создания приложения, упрощающий настройку и развертывание.
- **Thymeleaf**: Шаблонизатор для генерации HTML-страниц.
- **Spring Security**: Управление безопасностью и аутентификацией пользователей.
- **Spring Data JPA**: Упрощает работу с базой данных, используя JPA.
- **WebClient**: Асинхронные HTTP-запросы для взаимодействия с внешними API
